(self.webpackChunkude_a_io_t_page=self.webpackChunkude_a_io_t_page||[]).push([[2292],{5332:(e,n,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/demo_esp_bb.4109ed6.640.png 640w,"+s.p+"assets/ideal-img/demo_esp_bb.148ab32.1030.png 1030w",images:[{path:s.p+"assets/ideal-img/demo_esp_bb.4109ed6.640.png",width:640,height:338},{path:s.p+"assets/ideal-img/demo_esp_bb.148ab32.1030.png",width:1030,height:543}],src:s.p+"assets/ideal-img/demo_esp_bb.4109ed6.640.png",toString:function(){return s.p+"assets/ideal-img/demo_esp_bb.4109ed6.640.png"},placeholder:void 0,width:640,height:338},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAACmFAAAphQGPVf7hAAAAxklEQVR4nAXBsUrDQACA4XtDh6JCJ1E0o7RvkEHQKYOjacFS1+ISSpNmrna4MxcOS9NSQmxsCMlgUsTp9/vE8nXCjWVxZ9u0TUvbHKmqirquieMYYwxlWSKU7/MyHvE8dlFGEu1inEeHcB6i1Af+bIaUEvHmeZydnnBrXdB87zAbw9X1JcPBEKkUQeCjtUbI6ZR+r49z/wBVgX4P6XTPGTy5LJYLgnmAjjTiZ7vltyho93v+DgVZkvC5WvGVZSTrhDRNyfOcf/aHojnB8GcdAAAAAElFTkSuQmCC"}},5356:(e,n,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/demo_esp_sch.b525bd4.640.png 640w,"+s.p+"assets/ideal-img/demo_esp_sch.11ca448.990.png 990w",images:[{path:s.p+"assets/ideal-img/demo_esp_sch.b525bd4.640.png",width:640,height:504},{path:s.p+"assets/ideal-img/demo_esp_sch.11ca448.990.png",width:990,height:780}],src:s.p+"assets/ideal-img/demo_esp_sch.b525bd4.640.png",toString:function(){return s.p+"assets/ideal-img/demo_esp_sch.b525bd4.640.png"},placeholder:void 0,width:640,height:504},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAACXBIWXMAACmFAAAphQGPVf7hAAAAu0lEQVR4nE1P2W7DMAzz///mGrdxusTyKZ8s5KDDCFB6kMBDXdeFnDPIEVKIYGaUUiCYc2KMgdYa1BwT3tE6eiL01pBSgiUL82tARBAxNVuH+XmgytYbOASQczjPEzHdDkI1e8f7+YS1hNfxWjTGIISwbGut/x61RogRb7MjOkJmhr0s9K7hvYe19n48tg1cKw6tUVNaRaSAUNREVc05UJiRc1qhW61/ltL6CyVDDlzu0KLSe18USFZp/gERajYK0AooUQAAAABJRU5ErkJggg=="}},7408:(e,n,s)=>{"use strict";s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var r=s(7624),i=s(4552),t=(s(6212),s(2440),s(6968));const a={sidebar_label:"Ejemplo 2"},d="Ejemplo 2",o={id:"sesiones/percepcion/sesion4c",title:"Ejemplo 2",description:"La siguiente aplicaci\xf3n muestra un ejemplo en el que se usa la comunicaci\xf3n serial para realizar un debug de una aplicaci\xf3n imprimiendo mensajes enviados desde el ESP32 con el fin de hacer una prueba de escritorio que determine que el funcionamiento de la aplicaci\xf3n es coherente con lo que se espera.",source:"@site/docs/sesiones/percepcion/sesion4c.md",sourceDirName:"sesiones/percepcion",slug:"/sesiones/percepcion/sesion4c",permalink:"/UdeA_IoT-page/docs/sesiones/percepcion/sesion4c",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/sesiones/percepcion/sesion4c.md",tags:[],version:"current",frontMatter:{sidebar_label:"Ejemplo 2"},sidebar:"sesionesSidebar",previous:{title:"Ejemplo 1",permalink:"/UdeA_IoT-page/docs/sesiones/percepcion/sesion4b"},next:{title:"Ejemplo 3",permalink:"/UdeA_IoT-page/docs/sesiones/percepcion/sesion4d"}},c={},l=[{value:"Requerimientos",id:"requerimientos",level:2},{value:"Hardware",id:"hardware",level:2},{value:"Software",id:"software",level:2},{value:"Usando Platformio",id:"usando-platformio",level:2},{value:"Pruebas - Haciendo debug serial",id:"pruebas---haciendo-debug-serial",level:2},{value:"Referencias",id:"referencias",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"ejemplo-2",children:"Ejemplo 2"}),"\n",(0,r.jsx)(n.p,{children:"La siguiente aplicaci\xf3n muestra un ejemplo en el que se usa la comunicaci\xf3n serial para realizar un debug de una aplicaci\xf3n imprimiendo mensajes enviados desde el ESP32 con el fin de hacer una prueba de escritorio que determine que el funcionamiento de la aplicaci\xf3n es coherente con lo que se espera."}),"\n",(0,r.jsx)(n.h2,{id:"requerimientos",children:"Requerimientos"}),"\n",(0,r.jsx)(n.p,{children:"Desarrollar un sistema que permita modificar el color de un led RGB cada vez que se presiona un pulsador. Los estados entre los que cambiara el led RGB cada vez que se presione el pulsador son: rojo, verde, azul y apagado."}),"\n",(0,r.jsx)(n.h2,{id:"hardware",children:"Hardware"}),"\n",(0,r.jsx)(n.p,{children:"Los componentes necesarios para el circuito son"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Elemento"}),(0,r.jsx)(n.th,{children:"Descripcion"}),(0,r.jsx)(n.th,{children:"Observacione"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Placa de desarrollo ESP32"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"Pulsador"}),(0,r.jsxs)(n.td,{children:["En este caso se uso el modulo ",(0,r.jsx)(n.strong,{children:"Reed Switch Module"})," del ",(0,r.jsx)(n.strong,{children:"37 Sensor Kit - Elegoo"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"Led RGB"}),(0,r.jsxs)(n.td,{children:["Se uso el modulo ",(0,r.jsx)(n.strong,{children:"RGB LED Module"})," del ",(0,r.jsx)(n.strong,{children:"37 Sensor Kit - Elegoo"})]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"A continuaci\xf3n se muestra el esquematico del circuito a montar:"}),"\n",(0,r.jsx)(t.c,{img:s(5356)}),"\n",(0,r.jsx)(n.p,{children:"La siguiente tabla muestra las conexiones entre la placa ESP32 y los modulos externos (led y switch):"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Puerto"}),(0,r.jsx)(n.th,{children:"Pin"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Nombre"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"31"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GPIO19"})}),(0,r.jsx)(n.td,{children:"Output"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PIN_BLUE"})}),(0,r.jsxs)(n.td,{children:["Puerto que se conecta al pin ",(0,r.jsx)(n.strong,{children:"B"})," (azul) del modulo del led RGB"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"30"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GPIO18"})}),(0,r.jsx)(n.td,{children:"Output"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PIN_GREEN"})}),(0,r.jsxs)(n.td,{children:["Puerto que se conecta al pin ",(0,r.jsx)(n.strong,{children:"G"})," (verde) del modulo del led RGB"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"29"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GPIO5"})}),(0,r.jsx)(n.td,{children:"Output"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PIN_RED"})}),(0,r.jsxs)(n.td,{children:["Puerto que se conecta al pin ",(0,r.jsx)(n.strong,{children:"R"})," (red) del modulo del led RGB"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"28"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"GPIO17"})}),(0,r.jsx)(n.td,{children:"Input"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PIN_BUTTON"})}),(0,r.jsxs)(n.td,{children:["Puerto de control que se conecta pin ",(0,r.jsx)(n.strong,{children:"S"})," del modulo ",(0,r.jsx)(n.strong,{children:"switch"})]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"El diagrama de conexi\xf3n asociado al esquematico anterior, se muestra a continuaci\xf3n:"}),"\n",(0,r.jsx)(t.c,{img:s(5332)}),"\n",(0,r.jsx)(n.h2,{id:"software",children:"Software"}),"\n",(0,r.jsxs)(n.p,{children:["El programa (",(0,r.jsx)(n.a,{href:"https://wokwi.com/projects/375183687075033089",children:"simulaci\xf3n online"}),") que recoge lo que se pide se muestra a continuaci\xf3n."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include <Arduino.h>\r\n\r\n/* Constantes */\r\n\r\n// Para debug\r\n#define DEBUG 1\r\n\r\n// Estados \r\n#define OFF_STATE 0\r\n#define RED_STATE 1\r\n#define GREEN_STATE 2\r\n#define BLUE_STATE 3\r\n\r\n// Comunicacion serial\r\nconst int baud_rate = 9600;\r\n\r\n// Para el programa\r\nconst int DEBOUNCE_WINDOW = 40; // in ms\r\n\r\n/* Entradas y salidas */\r\n\r\n// Entradas\r\nconst int PIN_BUTTON = 17;\r\n\r\n// Salidas\r\n#define PIN_RED 5      // P5 (GPIO5)\r\n#define PIN_GREEN 18   // P18 (GPI18)\r\n#define PIN_BLUE 19     // P19 (GPI19)\r\n\r\n/* Variables*/\r\nint state;          // Estado\r\nint button_val_prev;  // Valor del boton anterior\r\nint button_val_act;  // Valor del boton anterior\r\n\r\n/* Funciones */\r\n\r\nvoid put_color(int, int, int);\r\n\r\nvoid setup() {  \r\n  pinMode(PIN_BUTTON, INPUT);  \r\n  state = OFF_STATE;\r\n  button_val_act = LOW; // Valor inicial del boton\r\n  put_color(0, 0, 0);   // Led inicia apagado\r\n  Serial.begin(baud_rate);   \r\n  Serial.println("Dispositivo iniciado: OK");\r\n  Serial.println("Led -> Apagado");\r\n  #ifdef DEBUG   \r\n    Serial.print("Estado actual: ");\r\n    Serial.println(state);\r\n  #endif\r\n}\r\n\r\nvoid loop() {\r\n  // Lectura inicial del boton  \r\n  button_val_act = digitalRead(PIN_BUTTON); // Se lee el boton\r\n  \r\n  // Ventan de tiempo para el debounce\r\n  delay(DEBOUNCE_WINDOW);                   \r\n  \r\n  // Lectura despues de que pasa el rebote del boton \r\n  button_val_prev = button_val_act;         // Se almacena el valor previo del boton\r\n  button_val_act = digitalRead(PIN_BUTTON); // Se vuelve a leer el boton\r\n\r\n  // Comparacion de los valores previo y actual del boton\r\n  if (button_val_act != button_val_prev) {\r\n    // Se pulso el boton\r\n    if(button_val_act == HIGH) {\r\n      // Se verifica que el boton haya cambiado de LOW a HIGH\r\n      // Maquina de estados\r\n      switch (state) {\r\n      case OFF_STATE:            \r\n        state = RED_STATE;    // Proximo estado -> Rojo\r\n        put_color(255, 0, 0); // Led se pone en rojo\r\n        Serial.println("Led -> Rojo");\r\n        #ifdef DEBUG          \r\n          Serial.print("Estado : ");\r\n          Serial.println(state);\r\n        #endif\r\n        break;\r\n      case RED_STATE:            \r\n        state = GREEN_STATE;  // Proximo estado -> Verde\r\n        put_color(0, 255, 0); // Led se pone en verde\r\n        Serial.println("Led -> Verde");\r\n        #ifdef DEBUG          \r\n          Serial.print("Estado : ");\r\n          Serial.println(state);\r\n        #endif\r\n        break;\r\n      case GREEN_STATE:            \r\n        state = BLUE_STATE;   // Proximo estado -> Azul\r\n        put_color(0, 0, 255); // Led se pone en azul\r\n        Serial.println("Led -> Azul");\r\n        #ifdef DEBUG          \r\n          Serial.print("Estado : ");\r\n          Serial.println(state);\r\n        #endif\r\n        break;\r\n      case BLUE_STATE:            \r\n        state = OFF_STATE;   // Proximo estado -> Apagado\r\n        put_color(0, 0, 0); // Led se apaga\r\n        Serial.println("Led -> Apagado");\r\n        #ifdef DEBUG          \r\n          Serial.print("Estado : ");\r\n          Serial.println(state);\r\n        #endif\r\n        break;\r\n      }    \r\n    }\r\n  }\r\n}\r\n\r\n// Funciones\r\nvoid put_color(int R, int G, int B) {\r\n  analogWrite(PIN_RED,R);\r\n  analogWrite(PIN_GREEN,G);\r\n  analogWrite(PIN_BLUE,B);\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"usando-platformio",children:"Usando Platformio"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Iniciar Platformio"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p1",src:s(48).c+"",width:"407",height:"615"})}),"\n",(0,r.jsx)(n.p,{children:"Si todo esta bien aparecera:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p2",src:s(9760).c+"",width:"1036",height:"689"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Crear nuevo proyecto"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p3",src:s(1540).c+"",width:"1366",height:"728"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Seleccionar la plataforma y el lugar donde estara el proyecto."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p4",src:s(4768).c+"",width:"595",height:"545"})}),"\n",(0,r.jsx)(n.p,{children:"Si todo esta bien el resultado sera como el siguiente:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p5",src:s(9436).c+"",width:"846",height:"508"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Abrir el archivo ",(0,r.jsx)(n.strong,{children:"main.cpp"})," y editarlo"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p6",src:s(9016).c+"",width:"843",height:"639"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Subir el codigo a la tarjeta"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p7",src:s(3136).c+"",width:"1020",height:"184"})}),"\n",(0,r.jsx)(n.p,{children:"Luego se procede a subir el codigo:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p8",src:s(8320).c+"",width:"1022",height:"167"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ensayar el funcionamiento."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p9",src:s(2836).c+"",width:"1021",height:"350"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pruebas---haciendo-debug-serial",children:"Pruebas - Haciendo debug serial"}),"\n",(0,r.jsx)(n.p,{children:"Se puede hacer debug serial empleando el siguiente boton para ello:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p10",src:s(4328).c+"",width:"990",height:"235"})}),"\n",(0,r.jsx)(n.p,{children:"A continuaci\xf3n se muestra la prueba de funcionamiento:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"p11",src:s(1420).c+"",width:"1014",height:"292"})}),"\n",(0,r.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://mongoose.ws/documentation/tutorials/esp32/uart-bridge/",children:"https://mongoose.ws/documentation/tutorials/esp32/uart-bridge/"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ece353.engr.wisc.edu/serial-interfaces/uart-basics/",children:"https://ece353.engr.wisc.edu/serial-interfaces/uart-basics/"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/establish-serial-connection.html",children:"https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/establish-serial-connection.html"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.sparkfun.com/engineering_essentials",children:"https://www.sparkfun.com/engineering_essentials"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.thinger.io/",children:"https://docs.thinger.io/"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.electronicwings.com/esp32/getting-started-with-esp32",children:"https://www.electronicwings.com/esp32/getting-started-with-esp32"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://mongoose.ws/documentation/tutorials/esp32/uart-bridge/",children:"https://mongoose.ws/documentation/tutorials/esp32/uart-bridge/"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},48:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio1-7aab2e97ca7bcb34276398ee1e2ff987.png"},4328:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio10-7feb09f13b8e986385ae1cf72acd79cd.png"},1420:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio11-1473cf9660bd66fcc286b899d0c960db.png"},9760:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio2-d7a2582a21d989cc54382c2507228494.png"},1540:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio3-1872aa6389d953ae6504386084f3e1fc.png"},4768:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio4-07a050721d5833f3a2cf0dfa7879d4ee.png"},9436:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio5-db69355f4e96526d46994991f8e1dc53.png"},9016:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio6-5f7b1977931a9aedd3cf6a741341ac8f.png"},3136:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio7-44b09b7723bbd7bb777809ab54ab0c9d.png"},8320:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio8-02b6234d2638bbf928bb20d4cc6f8dca.png"},2836:(e,n,s)=>{"use strict";s.d(n,{c:()=>r});const r=s.p+"assets/images/platformio9-a24c7751d0cbd4b58bfc2e65306f790f.png"}}]);